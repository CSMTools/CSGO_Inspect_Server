generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model steam_users {
  steam_id        String   @id @unique
  avatar_hash     String
  vac_ban         Boolean?
  trade_ban       Boolean?
  last_update     BigInt
  checked_friends Boolean  @default(false)
  premium         Boolean  @default(false)
  items           steam_item[]

  @@index([steam_id])
}

model steam_item {
  id                  String @unique 
  last_inspect_fields String // Easy way to get item with caching, for example: M4313928510512678228A30019827328D14610838559007360636

  // Data
  defindex            Int
  paintindex          Int
  rarity              Int
  quality             Int
  killeaterscoretype  Int?
  killeatervalue      Int
  customname          String?
  paintseed           Int?
  paintwear           Float
  origin              Int
  latest_stickers     String[] // Serialized with serializeStickerData_V1

  owner               steam_users @relation(fields: [ownerId], references: [steam_id])
  ownerId             String // relation scalar field  (used in the `@relation` attribute above)
  ownerHistory        String[]
  last_update         BigInt

  @@id([id, last_inspect_fields])
}